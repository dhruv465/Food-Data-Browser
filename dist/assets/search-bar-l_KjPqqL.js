import{b as k,j as e,L as y,c as f,g as p,d as C,r as c}from"./index-Bo6eneuo.js";const I=({product:n,className:r})=>{var b;const{theme:o}=k(),{id:l,product_name:t,brands:d,image_url:x,image_front_url:u,image_front_small_url:i,categories_tags:h=[],nutrition_grades:a,ingredients_text:g}=n,w=(((b=h[0])==null?void 0:b.replace("en:",""))||"UN").split(":").pop().replace(/-/g," "),j=s=>s?{a:{color:"bg-green-500",icon:"★★★"},b:{color:"bg-lime-500",icon:"★★"},c:{color:"bg-yellow-500",icon:"★"},d:{color:"bg-orange-500",icon:"▲"},e:{color:"bg-red-500",icon:"■"}}[s.toLowerCase()]||{color:"bg-gray-300",icon:"?"}:{color:"bg-gray-300",icon:"?"},v=s=>s?j(s).color:"bg-gray-300";return e.jsxs(y,{to:`/product/${l}`,className:f("group flex flex-col overflow-hidden rounded-lg transition-all hover:shadow-[0_4px_12px_rgba(0,0,0,0.05)] dark:hover:shadow-md relative",C("card",o,"hover:translate-y-[-2px]"),r),children:[e.jsxs("div",{className:"relative aspect-square overflow-hidden bg-muted",children:[e.jsx("img",{src:x||u||i||p(),alt:t||"Food product",className:"h-full w-full object-contain transition-transform group-hover:scale-105",loading:"lazy",onError:s=>{s.target.src!==p()&&(s.target.src=p())}}),a&&e.jsx("div",{className:"absolute top-2 right-2 z-10",children:e.jsx("span",{className:f("flex h-7 w-7 items-center justify-center rounded-full text-xs font-bold text-white",v(a)),title:`Nutrition Grade: ${a.toUpperCase()}`,children:a.toUpperCase()})})]}),e.jsxs("div",{className:"flex flex-1 flex-col space-y-3 p-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide truncate",children:w}),e.jsx("h3",{className:"font-medium leading-snug line-clamp-2 min-h-[2.5rem]",children:t||"UN"}),g&&e.jsx("p",{className:"text-sm text-muted-foreground leading-normal line-clamp-2 min-h-[2.5rem]",children:g})]})]})};function _(n,r=500){const[o,l]=c.useState(n);return c.useEffect(()=>{const t=setTimeout(()=>{l(n)},r);return()=>{clearTimeout(t)}},[n,r]),o}const B=({className:n,onSearch:r,initialValue:o="",...l})=>{const[t,d]=c.useState(o),[x,u]=c.useState(!1),i=_(t,500);c.useEffect(()=>{d(o)},[o]),c.useEffect(()=>{r&&i!==o&&r(i)},[i,r,o]);const h=m=>{d(m.target.value)},a=m=>{m.preventDefault(),t.trim()&&r&&r(t.trim())},g=()=>{d(""),r&&r("")};return e.jsx("form",{onSubmit:a,className:f("relative w-full",n),...l,children:e.jsxs("div",{className:f("flex h-10 items-center rounded-md border bg-background px-3 py-2 text-sm ring-offset-background","focus-within:ring-1 focus-within:ring-ring focus-within:ring-offset-2",x?"ring-1 ring-ring ring-offset-2":""),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2 text-muted-foreground",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",value:t,onChange:h,onFocus:()=>u(!0),onBlur:()=>u(!1),placeholder:"Search for food products...",className:"flex-1 bg-transparent outline-none placeholder:text-muted-foreground"}),t&&e.jsx("button",{type:"button",onClick:g,className:"ml-2 text-muted-foreground hover:text-foreground","aria-label":"Clear search",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})};export{I as P,B as S};
