import{r as o,e as k,j as e,c as x}from"./index-Bo6eneuo.js";import{B as p,P as C,a as f}from"./button-C59QKRqG.js";import{a as S}from"./foodApi-BAACMahw.js";import{B as E}from"./barcode-image-dqI7N51X.js";const P=({className:g,...j})=>{const[r,t]=o.useState(""),[s,i]=o.useState(!0),[v,n]=o.useState(""),b=k(),N=a=>{const l=a.target.value;t(l),s||(i(!0),n(""))},w=a=>a.trim()?/^\d{8,14}$/.test(a.trim())?!0:(i(!1),n("Barcode should be 8-14 digits"),!1):(i(!1),n("Please enter a barcode"),!1),[d,m]=o.useState(!1),[u,h]=o.useState(""),y=async a=>{var l;if(a.preventDefault(),w(r)){m(!0),h("");try{await S(r.trim()),b(`/product/${r.trim()}`)}catch(c){i(!1),c.message.includes("not found")||((l=c.response)==null?void 0:l.status)===404?n(`Product with barcode ${r.trim()} not found`):h(c.message||"Failed to fetch product information")}finally{m(!1)}}},B=r&&s&&r.trim().length>=8&&r.trim().length<=14;return e.jsxs("div",{className:x("w-full",g),...j,children:[e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:r,onChange:N,placeholder:"Enter product barcode (e.g., 3017620422003)",className:x("w-full px-4 py-2 border rounded-md bg-background","focus:outline-none focus:ring-2 focus:ring-primary",!s&&"border-destructive focus:ring-destructive"),"aria-invalid":!s,"aria-describedby":s?void 0:"barcode-error"}),!s&&e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-destructive",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}),!s&&e.jsx("p",{id:"barcode-error",className:"text-sm text-destructive",children:v})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(p,{type:"submit",className:"w-full sm:w-auto",disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Searching..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Search Barcode"]})}),e.jsx(p,{type:"button",variant:"outline",onClick:()=>t(""),disabled:!r,children:"Clear"})]})]}),B&&e.jsxs("div",{className:"mt-4 p-4 border rounded-md bg-background",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Barcode Preview:"}),e.jsx(E,{barcode:r.trim(),format:"EAN13",height:80,className:"max-w-full bg-white p-3 rounded-md border"})]}),u&&e.jsxs("div",{className:"mt-4 p-4 border border-destructive rounded-md bg-destructive/10",children:[e.jsx("p",{className:"text-destructive font-medium",children:"Error"}),e.jsx("p",{className:"text-sm",children:u})]}),e.jsxs("div",{className:"mt-6 p-4 border rounded-md bg-muted/50",children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Example Barcodes to Try:"}),e.jsxs("ul",{className:"space-y-1 text-sm",children:[e.jsxs("li",{children:[e.jsx("button",{onClick:()=>t("3017620422003"),className:"text-primary hover:underline",children:"3017620422003"}),e.jsx("span",{className:"text-muted-foreground ml-2",children:"(Nutella)"})]}),e.jsxs("li",{children:[e.jsx("button",{onClick:()=>t("5449000000996"),className:"text-primary hover:underline",children:"5449000000996"}),e.jsx("span",{className:"text-muted-foreground ml-2",children:"(Coca-Cola)"})]}),e.jsxs("li",{children:[e.jsx("button",{onClick:()=>t("7622210449283"),className:"text-primary hover:underline",children:"7622210449283"}),e.jsx("span",{className:"text-muted-foreground ml-2",children:"(Oreo)"})]})]})]})]})},F=()=>e.jsxs(e.Fragment,{children:[e.jsx(C,{title:"Barcode Search",description:"Enter a product barcode to find detailed nutritional information instantly."}),e.jsxs("div",{className:"max-w-xl mx-auto",children:[e.jsx(f,{children:e.jsx(P,{})}),e.jsx(f,{title:"About Barcode Search",className:"mt-8",children:e.jsxs("div",{className:"rounded-lg border bg-card p-6",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Barcode search allows you to quickly find specific products in our database. Simply enter the product's barcode (typically 8-14 digits found under the barcode on packaging) and we'll retrieve all available information."}),e.jsx("p",{className:"text-muted-foreground",children:"This feature is perfect for checking nutritional information while shopping or to quickly look up products you have at home."})]})})]})]});export{F as default};
